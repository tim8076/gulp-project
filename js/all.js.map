{"version":3,"sources":["all.js"],"names":["gameIndexView","document","querySelector","startGameButton","gamingView","startGame","classList","add","body","remove","addEventListener","getCookie","name","value","cookie","parts","split","length","pop","shift","xScoreBoard","oScoreBoard","xScore","Number","oScore","console","log","gameBoard","grids","querySelectorAll","resultViews","currentTurn","winMatch","oMatch","xMatch","winner","turnCount","switchTurn","checkWinner","currentMatch","win","forEach","match","isWin","every","num","includes","setScore","scoreBoard","score","innerText","showResult","view","contains","playGame","e","currentTarget","childNodes","targetNum","parseInt","target","dataset","innerHTML","push","grid","restartGameButton","restartGame","init"],"mappings":"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","file":"all.js","sourcesContent":["// 遊戲開始畫面\r\nconst gameIndexView = document.querySelector('[data-game-start]');\r\nconst startGameButton = document.querySelector('[data-game-start-button]');\r\nconst gamingView = document.querySelector('[data-gaming]');\r\n\r\nconst startGame = () => {\r\n  gameIndexView.classList.add('d-none');\r\n  document.body.classList.add('bg-primary');\r\n  gamingView.classList.remove('d-none');\r\n}\r\nstartGameButton.addEventListener('click', startGame);\r\n\r\n// 讀取指定cookie\r\nfunction getCookie(name) {\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop().split(';').shift();\r\n}\r\n\r\n// 遊戲進行中\r\nconst xScoreBoard = document.querySelector('[data-x-score]');\r\nconst oScoreBoard = document.querySelector('[data-o-score]');\r\nlet xScore = Number(getCookie('xScore')) || 0;\r\nlet oScore = Number(getCookie('oScore')) || 0;\r\nconsole.log(xScore, oScore)\r\nconst gameBoard = document.querySelector('.game-grid-container.gaming');\r\nconst grids = document.querySelectorAll('.game-grid-container.gaming .col');\r\nconst resultViews = document.querySelectorAll('[data-result-win]');\r\nlet currentTurn = 'o';\r\nconst winMatch = [\r\n  [1, 2, 3],\r\n  [4, 5, 6],\r\n  [7, 8, 9],\r\n  [1, 4, 7],\r\n  [2, 5, 8],\r\n  [3, 6, 9],\r\n  [1, 5, 9],\r\n  [3, 5, 7],\r\n];\r\nconst oMatch = [];\r\nconst xMatch = [];\r\nlet winner;\r\nlet turnCount = 1;\r\n\r\nconst switchTurn = () => {\r\n  turnCount += 1;\r\n  if (currentTurn === 'o') {\r\n    gamingView.classList.remove('o-turn');\r\n    gamingView.classList.add('x-turn');\r\n    currentTurn = 'x';\r\n  } else {\r\n    gamingView.classList.remove('x-turn');\r\n    gamingView.classList.add('o-turn');\r\n    currentTurn = 'o';\r\n  }\r\n}\r\n\r\nconst checkWinner = (currentMatch) => {\r\n  let win = false;\r\n  winMatch.forEach(match => {\r\n    let isWin = match.every(num => {\r\n      return currentMatch.includes(num);\r\n    });\r\n    if (isWin) win = true;\r\n  })\r\n  return win;\r\n}\r\n\r\nconst setScore = (scoreBoard, score) => {\r\n  scoreBoard.innerText = score;\r\n}\r\n\r\nconst showResult = (winner) => {\r\n  resultViews.forEach(view => {\r\n    view.classList.add('d-none');\r\n    if(view.classList.contains(winner)) {\r\n      view.classList.remove('d-none');\r\n    }\r\n  })\r\n}\r\nconst playGame = function(e) {\r\n  if (e.currentTarget.childNodes.length) return;\r\n  const targetNum = parseInt(e.target.dataset.num);\r\n  if (currentTurn === 'o') {\r\n    e.currentTarget.innerHTML ='<i class=\"fa-regular fa-circle\"></i>';\r\n    oMatch.push(targetNum);\r\n    if(checkWinner(oMatch)) {\r\n      oScore += 1;\r\n      setScore(oScoreBoard, oScore);\r\n      document.cookie = `oScore=${oScore}`;\r\n      gameBoard.classList.add('d-none');\r\n      showResult('o-win');\r\n      return;\r\n    }\r\n  } \r\n  if (currentTurn === 'x') {\r\n    e.currentTarget.innerHTML = '<i class=\"fa-solid fa-x\"></i>';\r\n    xMatch.push(targetNum);\r\n    if (checkWinner(xMatch)) {\r\n      xScore += 1;\r\n      setScore(xScoreBoard, xScore);\r\n      document.cookie = `xScore=${xScore}`;\r\n      gameBoard.classList.add('d-none');\r\n      showResult('x-win');\r\n      return;\r\n    }\r\n  }\r\n\r\n  // 平手時\r\n  if (turnCount >= 9) {\r\n    gameBoard.classList.add('d-none');\r\n    showResult('draw');\r\n  } else {\r\n    switchTurn();\r\n  }\r\n}\r\n\r\ngrids.forEach(grid => {\r\n  grid.addEventListener('click', playGame);\r\n});\r\n\r\n// 再玩一次\r\nconst restartGameButton = document.querySelector('[data-restart-game-button]');\r\nconst restartGame = () => {\r\n  resultViews.forEach(view => view.classList.add('d-none'));\r\n  grids.forEach(grid => grid.innerHTML = '');\r\n  turnCount = 1;\r\n  oMatch.length = 0;\r\n  xMatch.length = 0;\r\n  gameBoard.classList.remove('d-none');\r\n}\r\n\r\nrestartGameButton.addEventListener('click', restartGame);\r\n\r\n// 初始化\r\nconst init = () => {\r\n  xScoreBoard.innerText = xScore;\r\n  oScoreBoard.innerText = oScore;\r\n}\r\ninit();\r\n\r\n\r\n\r\n"]}